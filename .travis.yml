sudo: required
language: java
jdk: openjdk14
services:
- mysql
script:
- cd medihub-api && mvn install -DskipTests=false -Dmaven.javadoc.skip=true -B -V && mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=matijapetrovic_medihub
branches:
  only:
  - master
deploy:
  provider: heroku
  app: medihub-app
  api_key:
    secure: gGs2OyfW37GXSlAGcaa6VxDQwbT7kpMM8QOCiUfp01gRCsEDHcQpdyzqx3+NtB1Ricfd3Sbqktqr/Qjd46Zi1WqRBjYKQX8L07aDJQgrz1FozMkF/K0QkGmtAXuSYzuA9TK8rOOjPYoJRZ1WWxycNqg+J+VM/7gCjUOUuUySpT01ACAMaNjM06R0UgHwna4HwiNEV+B1IJdnzWU/A/o4tX1B5aXucGM2ZL5IVelZLToRFIjZ/PwetTf5dgkmxMuLcKOax3nLMl6UZJ3I+Wb0ApUy9GhBgo55StfnzDTuu7TrrVqQ+uY/RT22pljJ0w+PMqig+9HfkQmiUy/Ph0FVkRjVTVTU+3u1n0FEPpxyk3BKk54yKLpuunsunesEGqSnFVxWm9lBLOfI/4h2nTE5+mBYF4gVPpmHYpAfV4f80FL3u0CSKab17O63168oXYD4bD4Zu7IJBDc7z0ds3SHEPYrnU2x8pPv0Oxgmqj27gpfeW9Ob1IrDsxf3vKQc2nB8GYC4BCQAaC8GO9vAjmr7kPL2nSUYh+pqRAJVKRRfgwumXJkuUFukT9relS+JXJXU39JasHZlMCZ1IIh/nDuncUHZR2ZpSeaeOBvkZ+j8H6M97AfKklnUhXubJEVNka5c4MXt8LpwaVXL8cL6DVGg0coJmfaj1iS57XLsdR5RZp0=
  on:
    repo: matijapetrovic/medihub
    branch: master

addons:
  sonarcloud:
    organization: "matijapetrovic"
    token:
      secure: "Ts4n/fi9XH0rNQbvc5pAZo2/WsdCFHZ2B5omqSHzZ7SnGiOL2eBPJwC4JUDWgWvgiL+Dz1AkUqKonI+RGLOaU6AHyISV1Kofx3EwuuLihJBfKlzcil5G9g4A98wtI3NqwTHN+4Pbv1jIJaXDzuA1QCvgepNNP2E0z11hXVfXRnkN+nAVHpQRJ507YWTBSFCg7nmhKEZuVuotgoGNzm63QVCQXynsANlvqHMqqw09v5/LP+rIBxomj7PZEbGcTpbCdQXYfijzF5/qauultjyBJzhno1FfrSP3J4I8/crLsiOnSZAV8V8zJEkp0+MvZ02yZf2Pifxq8vxjtlXRnvO0y01uDpJUoNlOiYsY6keWJdV2sMkZICRnDpe9TdbFnvbrIOWIaGOIAan/hD5uOw7kf4UZZV/vSCSS5eV3kdbDDIpDhmHP5f2c/rAnuPBFL7vLVvVGUZW2thzHqFfDfBMYJNHI5FZ2NZWlfuA++rkmsqqKftwvdauPkbVH6m8DGClCFlZTHaRmO65EFPtjuKwMY9IHT5YiodqUm4jPLD6nqX7mc8eiIl2WgfAmH2IMlmY4NP+keriSsUXbq4NIqIW2PMNY8cK65r8oQSi6ezydY1Ma11DJylTcnmhn2gqg3Ibes9S292/K/snhaCHIfsAkghZWpqFD9J4SuuD7z4fS6vY="